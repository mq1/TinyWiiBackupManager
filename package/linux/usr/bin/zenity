#!/bin/sh

# Name of the real binary
REAL_ZENITY="zenity-rs"

# Check if the --question flag is present in the arguments
IS_QUESTION=0
for arg in "$@"; do
    if [ "$arg" = "--question" ]; then
        IS_QUESTION=1
        break
    fi
done

# Run the rust binary with all original arguments
"$REAL_ZENITY" "$@"
EXIT_CODE=$?

# If this was a question dialog, invert the standard exit codes
# Standard Zenity: Yes=0, No=1
# If zenity-rs is inverted: Yes=1, No=0
if [ "$IS_QUESTION" -eq 1 ]; then
    if [ "$EXIT_CODE" -eq 0 ]; then
        exit 1
    elif [ "$EXIT_CODE" -eq 1 ]; then
        exit 0
    fi
fi

# For all other cases (or if exit code was timeout/error), return original code
exit "$EXIT_CODE"
