// SPDX-FileCopyrightText: 2025 Manuel Quarneti <mq1@ik.me>
// SPDX-License-Identifier: GPL-3.0-only

import { Horizontal, CircularProgressIndicator, MaterialText, MaterialPalette, VerticalDivider, Icon } from "@material";
import { TaskType } from "common.slint";

export component Status inherits Rectangle {
    background: MaterialPalette.surface;

    in property <string> status;
    in property <TaskType> task_type: TaskType.Unknown;
    in property <int> task_count;

    Horizontal {
        alignment: start;

        CircularProgressIndicator {
            indeterminate: true;
            height: 18px;
            width: 18px;
        }

        MaterialText {
            text: task_count + " Task" + (task_count != 1 ? "s" : "");
        }

        VerticalDivider { }

        if task_type == TaskType.Converting: Icon {
            source: @image-url("../mdi/package-up.svg");
        }

        if task_type == TaskType.Archiving: Icon {
            source: @image-url("../mdi/package-down.svg");
        }

        if task_type == TaskType.DownloadingCovers: Icon {
            source: @image-url("../mdi/file-image-plus.svg");
        }

        if task_type == TaskType.CheckingForUpdates: Icon {
            source: @image-url("../mdi/refresh.svg");
        }

        if task_type == TaskType.DownloadingFolder: Icon {
            source: @image-url("../mdi/folder-download.svg");
        }

        MaterialText {
            text: status;
        }
    }
}
