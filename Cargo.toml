[package]
name = "TinyWiiBackupManager"
version = "5.1.9"
rust-version = "1.93"
edition = "2024"
authors = ["Manuel Quarneti <mq1@ik.me>"]
license = "GPL-3.0-only"
repository = "https://github.com/mq1/TinyWiiBackupManager"
homepage = "https://github.com/mq1/TinyWiiBackupManager/wiki"
description = "A tiny game backup and homebrew app manager for the Wii"
build = "build.rs"

[package.metadata.winresource]
OriginalFilename = "TinyWiiBackupManager.exe"
LegalCopyright = "Copyright Â© 2026 Manuel Quarneti. Licensed under GPL-3.0-only."

[dependencies]
iced = { version = "0.14", default-features = false, features = [
  "thread-pool",
  "sipper",
  "image-without-codecs",
  "linux-theme-detection",
  "x11",
  "wayland",
] }
iced_palace = "0.14"
wgpu = { version = "27", optional = true, default-features = false, features = [
  "std",
  "parking_lot",
] }
lucide-icons = { version = "0.563", features = ["iced"] }
image = { version = "0.25", default-features = false, features = ["png"] }
serde = { version = "1.0", features = ["derive"] }
serde_json = "1.0"
serde_with = "3.16"
directories = "6.0"
anyhow = "1.0"
size = { version = "0.5", features = ["serde"] }
quick-xml = { version = "0.38", features = ["serialize"] }
open = "5.3"
#nod = "2.0.0-alpha.4"
nod = { git = "https://github.com/mq1/nod.git" }
num_cpus = "1.17"
semver = "1.0"
hex = "0.4"
itertools = "0.14"
time = { version = "0.3", features = ["macros", "parsing", "serde"] }
sanitize-filename = "0.7.0-beta"
zip = { version = "8.0", default-features = false, features = [
  "deflate-flate2",
] }
fuzzy-matcher = "0.3"
zstd = "0.13"
minreq = "2.14"
strum = "0.27"
strum_macros = "0.27"
derive-getters = "0.5"
walkdir = "2.5"
fs_extra = "1.3"
wiiload = "0.3"
which-fs = "0.2"
fs4 = { version = "0.13", default-features = false }
blocking-dialog = { version = "0.0.11", default-features = false }
dark-light = { version = "2.0", optional = true, default-features = false }

[target.'cfg(windows)'.dependencies]
windows = { version = "0.62" }

[build-dependencies]
regex = "1.12"
lucide-icons = "0.563"
zstd = "0.13"
winresource = "0.1"

[features]
default = []
linux-appimage = [
  "iced/wgpu-bare",
  "wgpu/vulkan",
  "iced/tiny-skia",
  "minreq/https-rustls",
  "blocking-dialog/gtk3",
]
linux-flatpak = [
  "iced/wgpu-bare",
  "wgpu/vulkan",
  "iced/tiny-skia",
  "minreq/https-rustls-probe",
  "blocking-dialog/xdg-portal",
]
windows-legacy = ["iced/tiny-skia", "minreq/https-rustls"]
windows = [
  "iced/wgpu-bare",
  "wgpu/dx12",
  "minreq/https-native",
  "dep:dark-light",
  "windows/Win32_Graphics_Dwm",
]
macos = ["iced/wgpu-bare", "wgpu/metal", "minreq/https-native"]

[profile.release-lto]
inherits = "release"
opt-level = 3
lto = true
codegen-units = 1
strip = true
panic = "abort"

# Big UI dependencies (cargo bloat --release --crates)
[profile.release-lto.package.naga]
opt-level = "z"
[profile.release-lto.package.wgpu-core]
opt-level = "z"
[profile.release-lto.package.harfrust]
opt-level = "z"
[profile.release-lto.package.skrifa]
opt-level = "z"
[profile.release-lto.package.zeno]
opt-level = "z"
[profile.release-lto.package.read-fonts]
opt-level = "z"
[profile.release-lto.package.iced_winit]
opt-level = "z"
[profile.release-lto.package.wgpu]
opt-level = "z"
[profile.release-lto.package.iced_wgpu]
opt-level = "z"
[profile.release-lto.package.wgpu-hal]
opt-level = "z"
[profile.release-lto.package.winit]
opt-level = "z"
[profile.release-lto.package.cosmic-text]
opt-level = "z"
[profile.release-lto.package.iced_widget]
opt-level = "z"
[profile.release-lto.package.image]
opt-level = "z"
[profile.release-lto.package.iced_graphics]
opt-level = "z"

[profile.dev.package."*"]
opt-level = 1

[profile.dev.package.quick-xml]
overflow-checks = false

[lints.rust]
rust_2018_idioms = "deny"

[lints.clippy]
all = "warn"
pedantic = "warn"
